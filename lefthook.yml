pre-commit:
  parallel: true
  commands:
    lint:
      glob: "*.{js,ts,jsx,tsx,vue,json,css}"
      run: bunx biome check --write --staged {staged_files}
      stage_fixed: true
    typecheck:
      run: bun run typecheck
    knip:
      run: bun run knip

pre-push:
  parallel: true
  commands:
    test:
      run: bun run test

commit-msg:
  commands:
    validate:
      run: |
        # Conventional commits validation
        message=$(cat {1})
        pattern="^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,72}"
        if ! echo "$message" | grep -qE "$pattern"; then
          echo "Invalid commit message format."
          echo "Expected: <type>(<scope>): <subject>"
          echo "Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
          exit 1
        fi
