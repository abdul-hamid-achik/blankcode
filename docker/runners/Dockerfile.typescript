FROM node:22-alpine

WORKDIR /app

# Install npm packages globally for test running
RUN npm install -g vitest typescript @types/node

# Create non-root user for security
RUN adduser -D -u 10000 runner
USER runner

CMD ["npm", "test"]
