FROM rust:1.77-alpine

WORKDIR /app

# Install build dependencies
RUN apk add --no-cache musl-dev

# Create non-root user for security
RUN adduser -D -u 10000 runner
USER runner

CMD ["cargo", "test", "--", "--nocapture"]
